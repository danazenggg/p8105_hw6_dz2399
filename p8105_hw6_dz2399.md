HW6
================
DZ
November 19, 2018

Problem 1
---------

### tidy data

``` r
df_homicide <- read_csv('./data/homicide_data.csv') %>%
  janitor::clean_names()%>%
  mutate(city_state = paste(city,state,sep = ',')) %>% 
  filter(city_state!='Dallas,TX'&city_state!='Phoenix,AZ'&city_state!='Kansas City,MO'&city_state!='Tulsa,AL') %>% 
  mutate(resolved = as.numeric(disposition == "Closed by arrest"),
         victim_race = as.factor(victim_race),
         victim_age = as.numeric(victim_age),
         victim_sex = as.factor(victim_sex)) %>% 
  mutate(victim_race = fct_recode(victim_race, 
                                  non_white='Asian',
                                  non_white='Black',
                                  non_white='Hispanic',
                                  non_white='Other',
                                  non_white='Unknown',
                                  white='White')) %>% 
  mutate(victim_race = fct_relevel(victim_race,'white'))
```

    ## Warning in evalq(as.numeric(victim_age), <environment>): NAs introduced by
    ## coercion

### Baltimore,MD

``` r
glm.1 <- df_homicide %>% 
  filter(city_state=='Baltimore,MD') %>% 
  select(resolved, victim_age, victim_race, victim_sex) %>% 
  glm(resolved ~., data=., family = binomial()) 

glm.1.sum <- broom::tidy(glm.1) %>% 
  mutate(OR = exp(estimate)) %>%
  rename(log_OR = estimate) %>%
  select(term, log_OR , OR, p.value) 

conf_int.1 <- exp(confint(glm.1))
```

    ## Waiting for profiling to be done...

``` r
  knitr::kable(cbind(glm.1.sum,conf_int.1))
```

|                        | term                   |     log\_OR|         OR|    p.value|      2.5 %|     97.5 %|
|------------------------|:-----------------------|-----------:|----------:|----------:|----------:|----------:|
| (Intercept)            | (Intercept)            |   1.1860305|  3.2740589|  0.0000004|  2.0759841|  5.2121977|
| victim\_age            | victim\_age            |  -0.0069900|  0.9930344|  0.0321594|  0.9866654|  0.9993728|
| victim\_racenon\_white | victim\_racenon\_white |  -0.8195997|  0.4406080|  0.0000027|  0.3121625|  0.6196693|
| victim\_sexMale        | victim\_sexMale        |  -0.8877869|  0.4115656|  0.0000000|  0.3148182|  0.5369411|

From this generalied linear model summary, we can conclude that homicides in which the victim is non-white are substantially less likely to be resolved that those in which the victim is white, the adjusted OR is 0.4406, 95%CI (0.3121625 0.6196693)
